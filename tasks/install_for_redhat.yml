---
# Redhat based OS
- name: Rundeck | get rundeck rpm
  yum:
    name: http://repo.rundeck.org/latest.rpm
    state: present
  become: true
  tags:
    - rundeck
    - install
    - packages

- name: Rundeck | get rundeck rpm
  yum:
    name: rundeck
    state: present
  become: true
  notify:
    - start rundeck
  tags:
    - rundeck
    - install
    - packages

- name: install redhat | ensure dependencies are installed
  package:
    name: libsemanage-python
    state: present
  tags:
    - rundeck
    - install
    - selinux

- name: install redhat | ensure nginx can communicate to jenkins
  seboolean:
    name: httpd_can_network_connect
    state: true
    persistent: true
  tags:
    - rundeck
    - install
    - selinux
